<!-- Modal creating new customer -->
<div 
  class="modal fade"
  id="addCustomerModal" 
  tabindex="-1" 
  aria-labelledby="addCustomerModalLabel" 
  aria-hidden="true"
>
  <div class="modal-dialog modal-lg">
    <div class="modal-content">

      <!-- Creating new user form -->
      <form [formGroup]="customerForm" (ngSubmit)="onSubmit($event)">

        <!-- Modal header -->
        <div class="modal-header">
          <h5 class="modal-title" id="addCustomerModalLabel">Add New Customer</h5>
          <button 
            type="button" 
            class="btn-close" 
            data-bs-dismiss="modal" 
            aria-label="Close"
          ></button>
        </div>

        <!-- Modal body -->
        <div class="modal-body">

          <!-- Customer name -->
          <div class="mb-3">
            <!-- Customer name input field -->
            <label for="customerName" class="form-label">Customer Name</label>
            <input 
              type="text" 
              id="customerName" 
              class="form-control" 
              formControlName="customerName">
            
            <!-- Customer name error message -->
            <div 
              *ngIf="customerForm.controls['customerName'].invalid && (customerForm.controls['customerName'].dirty || customerForm.controls['customerName'].touched)" 
              class="text-danger"
            >
              <div *ngIf="customerForm.controls['customerName'].errors?.['required']">
                Customer Name is required.
              </div>
              <div *ngIf="customerForm.controls['customerName'].errors?.['minlength']">
                Customer Name must be at least 1 character long.
              </div>
              <div *ngIf="customerForm.controls['customerName'].errors?.['maxlength']">
                Customer Name cannot be more than 255 characters long.
              </div>
            </div>
          </div>

          <!-- Customer address -->
          <div class="mb-3">
            <!-- Customer address input field -->
            <label for="customerAddress" class="form-label">Customer Address</label>
            <input type="text" id="customerAddress" class="form-control" formControlName="customerAddress">

            <!-- Customer address error message -->
            <div 
              *ngIf="customerForm.controls['customerAddress'].invalid && (customerForm.controls['customerAddress'].dirty || customerForm.controls['customerAddress'].touched)" 
              class="text-danger"
            >
              <div *ngIf="customerForm.controls['customerAddress'].errors?.['required']">
                Customer Address is required.
              </div>
            </div>
          </div>

          <!-- Customer phone number -->
          <div class="mb-3">

            <!-- Customer phone number input field -->
            <label for="customerPhone" class="form-label">Customer Phone</label>
            <input 
              type="text" 
              id="customerPhone" 
              class="form-control" 
              formControlName="customerPhone">

            <!-- Customer phone error message -->
            <div 
              *ngIf="customerForm.controls['customerPhone'].invalid && (customerForm.controls['customerPhone'].dirty || customerForm.controls['customerPhone'].touched)" 
              class="text-danger"
            >
              <div *ngIf="customerForm.controls['customerPhone'].errors?.['required']">
                Customer Phone is required.
              </div>
              <div *ngIf="customerForm.controls['customerPhone'].errors?.['pattern']">
                Invalid phone number format. Must be between 10 and 15 digits.
              </div>
            </div>
          </div>

          <!-- Customer picture -->
          <div class="mb-3">

            <!-- Customer picture input  -->
            <label for="pic" class="form-label">PIC</label>
            <input type="file" id="pic" class="form-control" (change)="onFileChange($event)">
            <div 
              *ngIf="customerForm.controls['pic'].invalid && (customerForm.controls['pic'].dirty || customerForm.controls['pic'].touched)" 
              class="text-danger"
            >
              <div *ngIf="customerForm.controls['pic'].errors?.['required']">
                Customer picture is required.
              </div>
              <div *ngIf="customerForm.controls['pic'].errors?.['fileSize']">
                File size exceeds 5 MB.
              </div>
              <div *ngIf="customerForm.controls['pic'].errors?.['invalidFileType']">
                Invalid file format. Only JPG, JPEG, and PNG are allowed.
              </div>
            </div>
            
            <!-- Customer picture image preview -->
            <div *ngIf="previewUrl" class="mt-3 d-flex justify-content-center">
              <img 
                [src]="previewUrl" 
                alt="Image Preview" 
                class="img-fluid" 
                style="max-height: 150px; 
                max-width: 150px; 
                border-radius: 100%;">
            </div>
          </div>
        </div>

        <!-- Modal footer -->
        <div class="modal-footer">
          <button 
            type="button" 
            class="btn btn-secondary" 
            data-bs-dismiss="modal"
          >Cancel</button>

          <button 
            type="submit" 
            class="btn btn-primary" 
            [disabled]="customerForm.invalid"
          >Add</button>
        </div>
      </form>
    </div>
  </div>
</div>
